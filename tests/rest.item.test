<?php

function rest_item_test() {
	$node = entity_load('node', array(1));

	$node = array_shift($node);


	$required = array(
		'properties' => array(
			'title' => array('alias' => 'title'),
			'nid' => array('alias' => 'id')
		),
		'fields' => array(
			'field_related' => array(
				'alias' => 'related',
				'id_field_name' => 'nid',
				'entity_properties' => array('title','nid'), // array of properties required from the referred entity,
				'entity_fields' => array(
					'field_image' => array(
						'styles' => array('thumbnail')
					),
				),	// array of fields required from the referred entity (defined in media configs),
				'aliases' => array('field_image' => 'IMAGES'),		// aliases for the properties and fields
				'limit' => 10,  // how many results to retrieve
				'entity_properties' => array('nid','title'),
				'entity_fields' => array(
					'field_image' => array(
						'styles' => array('thumbnail')
					)
				),
			),
		),
	);

	// function __construct($entity_type, $entity, $required)
	$rest_item = new REST_EntityItem('node', $node, $required);

	echo '<pre>';

	$item = $rest_item->export();

	var_dump($item);

	die();
}